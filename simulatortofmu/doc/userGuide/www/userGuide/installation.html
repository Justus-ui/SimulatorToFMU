
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>2. Installation and Configuration &#8212; FMU Export of a Python-driven Simulation Program User Guide</title>
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3. Best Practice" href="bestPractice.html" />
    <link rel="prev" title="1. Introduction" href="introduction.html" /> 
  </head><body>
<div class="headerStyle">
<img src="_static/lbl-logo.png" alt="LBL logo" />
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="bestPractice.html" title="3. Best Practice"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="introduction.html" title="1. Introduction"
             accesskey="P">previous</a> |</li>
    <a href="index.html">User Guide</a></li>
    </br>
<!--    
        <li class="nav-item nav-item-0"><a href="index.html">FMU Export of a Python-driven Simulation Program User Guide</a> &#187;</li> -->
 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">2. Installation and Configuration</a><ul>
<li><a class="reference internal" href="#software-requirements">2.1. Software requirements</a></li>
<li><a class="reference internal" href="#installation-directory">2.2. Installation</a></li>
<li><a class="reference internal" href="#unittests">2.3. UnitTests</a></li>
<li><a class="reference internal" href="#uninstallation">2.4. Uninstallation</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="introduction.html"
                        title="previous chapter">1. Introduction</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="bestPractice.html"
                        title="next chapter">3. Best Practice</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/installation.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="installation-and-configuration">
<span id="installation"></span><h1>2. Installation and Configuration<a class="headerlink" href="#installation-and-configuration" title="Permalink to this headline">¶</a></h1>
<p>This chapter describes how to install, configure, and uninstall SimulatorToFMU on Windows and Linux operating systems. SimulatorToFMU is currently not supported on Mac OS.</p>
<div class="section" id="software-requirements">
<h2>2.1. Software requirements<a class="headerlink" href="#software-requirements" title="Permalink to this headline">¶</a></h2>
<p>To export a Simulator as an FMU, SimulatorToFMU needs:</p>
<ol class="arabic simple">
<li>Python and following dependencies:<ul>
<li>jinja2</li>
<li>lxml</li>
</ul>
</li>
<li>One Modelica parser</li>
<li>A C-Compiler</li>
</ol>
<p>SimulatorToFMU has been tested with:</p>
<ul class="simple">
<li>Python 2.7, Python 3.4, Python 3.7, and Python 3.8</li>
<li>Three Modelica parsers (All parsers are not needed for the export)<ul>
<li>Dymola 2018 on Windows and Linux</li>
<li>JModelica 2.0 on Windows, and JModelica trunk version 9899 on Linux</li>
<li>OpenModelica 1.19.2 on Windows</li>
</ul>
</li>
<li>C-Compiler: Microsoft Visual Studio 10 Professional, Microsoft Visual Studio 14.0, and
Microsoft Visual Studio 19.0</li>
</ul>
</div>
<div class="section" id="installation-directory">
<span id="id1"></span><h2>2.2. Installation<a class="headerlink" href="#installation-directory" title="Permalink to this headline">¶</a></h2>
<p>To install SimulatorToFMU, proceed as follows:</p>
<ol class="arabic simple">
<li>Add following folders to your system path:</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>Dymola executable folder (e.g. <code class="docutils literal notranslate"><span class="pre">C:\Program</span> <span class="pre">Files(x86)\Dymola2018\bin</span></code>) if Dymola is your Modelica parser.</li>
<li>JModelica installation folder (e.g. <code class="docutils literal notranslate"><span class="pre">C:\JModelica.org-2.0</span></code>) if JModelica is your Modelica parser.</li>
<li>OpenModelica executable folder (e.g. <code class="docutils literal notranslate"><span class="pre">C:\OpenModelica1.19.2-64bit\bin</span></code>) if OpenModelica is your Modelica parser.</li>
</ul>
<p>You can add folders to your system path by performing following steps on Windows 10:</p>
<ul class="simple">
<li>In Search, search for and then select: System (Control Panel)</li>
<li>Click the Advanced system settings link.</li>
<li>Click Environment Variables. In the section System Variables, find the PATH environment variable and select it. Click Edit.</li>
<li>In the Edit System Variable (or New System Variable) window, specify the value of the PATH environment variable (e.g. <code class="docutils literal notranslate"><span class="pre">C:\Python27</span></code>, <code class="docutils literal notranslate"><span class="pre">C:\Python27\Scripts</span></code>). Click OK. Close all remaining windows by clicking OK.</li>
<li>Reopen Command prompt window for your changes to be active.</li>
</ul>
<p>To check if the variables have been correctly added to the system path on Windows, type <code class="docutils literal notranslate"><span class="pre">python</span></code>, <code class="docutils literal notranslate"><span class="pre">dymola</span></code>, <code class="docutils literal notranslate"><span class="pre">pylab</span></code>, or <code class="docutils literal notranslate"><span class="pre">omc</span></code>
into a command prompt to see if the right version of Python, Dymola, JModelica,  or OpenModelica starts up.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>To avoid adding Dymola, JModelica, or OpenModelica to the system path, provide the path to the executables to SimulatorToFMU.py. See <a class="reference internal" href="build.html#build-cmd"><span class="std std-ref">Command-line use</span></a> for the lists of arguments of SimulatorToFMU.</li>
<li>SimulatorToFMU sets the hidden Dymola 2018’s flag <code class="docutils literal notranslate"><span class="pre">Advanced.AllowStringParametersForFMU</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code> when exporting a simulation program/script as an FMU. The flag is not available in older versions of Dymola. The flag is required to allow a master algorithm to set the path to the configuration file of an FMU. See section <a class="reference internal" href="build.html#build-cmd"><span class="std std-ref">Command-line use</span></a> for more details.</li>
</ul>
</div>
</div></blockquote>
<ol class="arabic simple" start="2">
<li>Specify the path of OPENMODELICALIBRARY (Only if OpenModelica is your Modelica parser) by</li>
</ol>
<blockquote>
<div><ul class="simple">
<li>Clicking the Advanced system settings link.</li>
<li>Clicking Environment Variables. In the section System Variables, Click New to create a new system variable.</li>
<li>Naming the new system variable OPENMODELICALIBRARY</li>
<li>Setting the variable value to point to the location of the OpenModelica Modelica libary (e.g. D:programsOpenModelica1.19.2-64bitlibomlibrary)</li>
<li>Click OK. Close all remaining windows by clicking OK.</li>
</ul>
</div></blockquote>
<ol class="arabic simple" start="3">
<li>Install SimulatorToFMU by downloading the package from the master branch
which is at <a class="reference external" href="https://github.com/LBNL-ETA/SimulatorToFMU">https://github.com/LBNL-ETA/SimulatorToFMU</a>.</li>
</ol>
<blockquote>
<div><p>The installation directory should contain the following subdirectories:</p>
<blockquote>
<div><ul class="simple">
<li><code class="docutils literal notranslate"><span class="pre">bin/</span></code>
(Scripts for running unit tests)</li>
<li><code class="docutils literal notranslate"><span class="pre">doc/</span></code>
(Documentation sources)</li>
<li><code class="docutils literal notranslate"><span class="pre">fmus/</span></code>
(FMUs folder)</li>
<li><code class="docutils literal notranslate"><span class="pre">parser/</span></code>
(Python scripts, Modelica templates and XML validator files)</li>
</ul>
</div></blockquote>
</div></blockquote>
</div>
<div class="section" id="unittests">
<h2>2.3. UnitTests<a class="headerlink" href="#unittests" title="Permalink to this headline">¶</a></h2>
<p>The unittests use PyFMI to run the FMUs generated by the tested Modelica parsers.
PyFMI is included in JModelica. To run the unittests, install JModelica and add
the installation folder to your system path.</p>
<p>To test your installation run from the installation <code class="docutils literal notranslate"><span class="pre">bin</span></code> folder</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&gt; python runUnitTest.py
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>On Windows’ machines, first run</p>
<div class="last highlight-none notranslate"><div class="highlight"><pre><span></span>&gt; setenv.bat
</pre></div>
</div>
</div>
<p>prior to starting the unittests. <cite>setenv.bat</cite> sets the environment variables
needed by PyFMI/JModelica to run FMUs. Invoking <cite>setenv.bat</cite> in the command prompt, assumes
that JModelica is on the system path. Otherwise,
you will need to provide the full path to <cite>setenv.bat</cite> which is in the Installation
folder of JModelica.</p>
</div>
<div class="section" id="uninstallation">
<h2>2.4. Uninstallation<a class="headerlink" href="#uninstallation" title="Permalink to this headline">¶</a></h2>
<p>To uninstall SimulatorToFMU, delete the installation directory.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="bestPractice.html" title="3. Best Practice"
             >next</a> |</li>
        <li class="right" >
          <a href="introduction.html" title="1. Introduction"
             >previous</a> |</li>
    <a href="index.html">User Guide</a></li>
    </br>
<!--    
        <li class="nav-item nav-item-0"><a href="index.html">FMU Export of a Python-driven Simulation Program User Guide</a> &#187;</li> -->
 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2022, The Regents of the University of California (through Lawrence Berkeley National Laboratory).
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.8.5.
    </div>
  </body>
</html>